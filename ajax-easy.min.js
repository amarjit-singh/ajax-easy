function enableSubmitButton(t){var e=t.find("button[type='submit']"),a=t.find("input[type='submit']");1==e.length?e.attr("disabled",!1).prop("disabled",!1).text(e.data("innertxt")):1==a.length?a.attr("disabled",!1).prop("disabled",!1).val(a.data("innertxt")):console.error("submit button not found.")}function disableSubmitButton(t,e){e=null===e?"Loading...":e;var a=t.find("button[type='submit']"),n=t.find("input[type='submit']");1==a.length?(a.attr("data-innertxt",a.text()),a.attr("disabled",!0).prop("disabled",!0).text(e)):1==n.length?(n.attr("data-innertxt",n.val()),n.attr("disabled",!0).prop("disabled",!0).val(e)):console.error("submit button not found.")}!function(t){t.fn.ajaxeasy=function(e){if(void 0===e&&(e={}),e.get=function(t){return t in this?this[t]:null},1!=t(this).length)throw new Error("please select exactly one element");if(!t(this).is("form"))throw new Error("element is not a form");var a=t(this);return a.submit(function(n){n.preventDefault(),a.find("div.ajaxeasy-validationerrors").remove(),disableSubmitButton(a,e.get("loading_txt"));var r={url:e.get("ajax_url")?e.get("ajax_url"):a.prop("action"),method:a.prop("method"),dataType:"JSON",data:a.serialize(),success:function(n){enableSubmitButton(a),e.get("success_message")&&(t("<div/>",{id:"ajaxeasy-success-message"}).css({"background-color":"green",position:"fixed",bottom:"10%",left:"50%",transform:"translateX(-50%)",padding:"9px",color:"white","border-radius":"3px",display:"block","z-index":"9999"}).appendTo(t("body")).text(e.get("success_message")),setTimeout(function(){t("#ajaxeasy-success-message").fadeOut("slow","linear",function(){t(this).remove()})},3e3)),e.get("ajax_success")?e.get("ajax_success")(n):a.trigger("reset")},error:function(e){if(enableSubmitButton(a),void 0!==e.responseJSON.errors)var n=e.responseJSON.errors;else n=e.responseJSON;var r=0;t.each(n,function(t,e){if(t.includes(".")){for(var n=(t=t.split("."))[0],i=1;i<t.length;i++)n+="["+t[i]+"]";t=n}e.constructor===Array&&(e=e[0]);var s=a.find('div.ae-error[data-for="'+t+'"]');0==s.length?a.find(':input[name="'+t+'"]').first().after("<div class='ajaxeasy-validationerrors' style='color:#d00606;'>"+e+"</div>"):s.append("<div class='ajaxeasy-validationerrors' style='color:#d00606;'>"+e+"</div>"),0==r&&(a.find(':input[name="'+t+'"]').first().focus(),r++)})}};"multipart/form-data"!=a.attr("enctype")&&0==a.find('input[type="file"]').length||(r.enctype="multipart/form-data",r.processData=!1,r.contentType=!1,r.data=new FormData(this),r.headers={"X-CSRF-Token":a.find('input[name="_token"]').val()}),t.ajax(r)}),this}}(jQuery);
