function enableSubmitButton(t){var e=t.find("button[type='submit']"),n=t.find("input[type='submit']");1==e.length?e.attr("disabled",!1).prop("disabled",!1).text(e.data("innertxt")):1==n.length?n.attr("disabled",!1).prop("disabled",!1).val(n.data("innertxt")):console.error("submit button not found.")}function disableSubmitButton(t,e){e=null===e?"Loading...":e;var n=t.find("button[type='submit']"),a=t.find("input[type='submit']");1==n.length?(n.attr("data-innertxt",n.text()),n.attr("disabled",!0).prop("disabled",!0).text(e)):1==a.length?(a.attr("data-innertxt",a.val()),a.attr("disabled",!0).prop("disabled",!0).val(e)):console.error("submit button not found.")}!function(n){n.fn.findInputByName=function(t){if(-1==t.indexOf("."))return n(this).find(':input[name="'+t+'"]');var e=t.split(".")[1];t=t.split(".")[0];return n(this).find(':input[name="'+t+'[]"]').eq(e)}}(jQuery),function(a){a.fn.ajaxeasy=function(n){if(void 0===n&&(n={}),n.get=function(t){return t in this?this[t]:null},1!=a(this).length)throw"please select exactly one element";if(!a(this).is("form"))throw"element is not a form";var s=a(this);return s.submit(function(t){t.preventDefault(),s.find("div.ajaxeasy-validationerrors").remove(),disableSubmitButton(s,n.get("loading_txt"));var e={url:s.prop("action"),method:s.prop("method"),dataType:"JSON",data:s.serialize(),success:function(t){s.trigger("reset"),enableSubmitButton(s),n.get("success_message")&&(a("<div/>",{id:"ajaxeasy-success-message"}).css({"background-color":"green",position:"fixed",bottom:"10%",left:"50%",transform:"translateX(-50%)",padding:"9px",color:"white","border-radius":"3px",display:"block","z-index":"9999"}).appendTo(a("body")).text(n.get("success_message")),setTimeout(function(){a("#ajaxeasy-success-message").fadeOut("slow","linear",function(){a(this).remove()})},3e3)),n.get("ajax_success")&&n.get("ajax_success")(t)},error:function(t){if(enableSubmitButton(s),void 0!==t.responseJSON.errors)var e=t.responseJSON.errors;else e=t.responseJSON;var i=0;a.each(e,function(t,e){if(t.includes(".")){for(var n=(t=t.split("."))[0],a=1;a<t.length;a++)n+="["+t[a]+"]";t=n}e.constructor===Array?s.findInputByName(t).after("<div class='ajaxeasy-validationerrors' style='color:#d00606;'>"+e[0]+"</div>"):s.findInputByName(t).after("<div class='ajaxeasy-validationerrors' style='color:#d00606;'>"+e+"</div>"),0==i&&(s.findInputByName(t).focus(),i++)})}};"multipart/form-data"!=s.attr("enctype")&&0==s.find('input[type="file"]').length||(e.enctype="multipart/form-data",e.processData=!1,e.contentType=!1,e.data=new FormData(this),e.headers={"X-CSRF-Token":s.find('input[name="_token"]').val()}),a.ajax(e)}),this}}(jQuery);
