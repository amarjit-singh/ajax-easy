function enableSubmitButton(t){var e=t.find("button[type='submit']"),n=t.find("input[type='submit']");1==e.length?e.attr("disabled",!1).prop("disabled",!1).text(e.data("innertxt")):1==n.length?n.attr("disabled",!1).prop("disabled",!1).val(n.data("innertxt")):console.error("submit button not found.")}function disableSubmitButton(t,e){dddd=t,e=null===e?"Loading...":e;var n=t.find("button[type='submit']"),a=t.find("input[type='submit']");1==n.length?(n.attr("data-innertxt",n.text()),n.attr("disabled",!0).prop("disabled",!0).text(e)):1==a.length?(a.attr("data-innertxt",a.val()),a.attr("disabled",!0).prop("disabled",!0).val(e)):console.error("submit button not found.")}!function(t){t.fn.findInputByName=function(e){if(-1==e.indexOf("."))return t(this).find(':input[name="'+e+'"]');var n=e.split(".")[1];e=e.split(".")[0];return t(this).find(':input[name="'+e+'[]"]').eq(n)}}(jQuery),function(t){t.fn.ajaxeasy=function(e){if(void 0===e&&(e={}),e.get=function(t){return t in this?this[t]:null},1!=t(this).length)throw"please select exactly one element";if(!t(this).is("form"))throw"element is not a form";var n=t(this);return n.submit(function(a){a.preventDefault(),n.find("div.ajaxeasy-validationerrors").remove(),disableSubmitButton(n,e.get("loading_txt"));var i={url:n.prop("action"),method:n.prop("method"),dataType:"JSON",data:n.serialize(),success:function(a){n.trigger("reset"),enableSubmitButton(n),e.get("success_message")&&(t("<div/>",{id:"ajaxeasy-success-message"}).css({"background-color":"green",position:"fixed",bottom:"10%",left:"50%",transform:"translateX(-50%)",padding:"9px",color:"white","border-radius":"3px",display:"block"}).appendTo(t("body")).text(e.get("success_message")),setTimeout(function(){t("#ajaxeasy-success-message").fadeOut("slow","linear",function(){t(this).remove()})},3e3)),e.get("ajax_success")&&e.get("ajax_success")(a)},error:function(e){enableSubmitButton(n);var a=0;t.each(e.responseJSON,function(t,e){if(e.constructor===Array)for(x in e)n.findInputByName(t).parent("div").append("<div class='ajaxeasy-validationerrors' style='color:#d00606;'>"+e[x]+"</div>"),0==a&&(n.findInputByName(t).focus(),a++);else n.findInputByName(t).parent("div").append("<div class='ajaxeasy-validationerrors' style='color:#d00606;'>"+e+"</div>"),0==a&&(n.findInputByName(t).focus(),a++)})}};"multipart/form-data"!=n.attr("enctype")&&0==n.find('input[type="file"]').length||(i.enctype="multipart/form-data",i.processData=!1,i.contentType=!1,i.data=new FormData(this),i.headers={"X-CSRF-Token":n.find('input[name="_token"]').val()}),t.ajax(i)}),this}}(jQuery);